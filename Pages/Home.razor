@page "/"
@inject PlanogramDataService PlanogramData
@inject NavigationManager Navigation

<PageTitle>Planogram Photo App</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="home-page">
    <MudText Typo="Typo.h4">Planogram Photo App</MudText>
    <MudText Typo="Typo.body2" Class="subtitle">Select a planogram to start taking segment photos.</MudText>

    <MudGrid Class="planogram-list" Spacing="3">
        @foreach (var planogram in PlanogramData.GetAllPlanograms())
        {
            <MudItem xs="12">
                <MudCard Class="planogram-card" Elevation="1">
                    <MudCardContent>
                        <MudText Typo="Typo.h6">@planogram.Name</MudText>
                        <MudText Typo="Typo.body2" Class="segment-count">@planogram.NumberOfSegments segment(s)</MudText>
                    </MudCardContent>
                    <MudCardActions>
                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="() => StartCapture(planogram.Id)">
                            Start capture
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>
        }
    </MudGrid>
</MudContainer>

@code {
    private void StartCapture(string planogramId)
    {
        Navigation.NavigateTo($"/capture/{planogramId}");
    }
}
